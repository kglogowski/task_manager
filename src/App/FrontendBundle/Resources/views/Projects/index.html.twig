{% extends "::frontend.html.twig" %}


{% block content %}
{% if app.user.isGranted('ROLE_ADMIN') %}
<div class="modernizator_area">
    <a href="{{ url('projects_new') }}">
        <div data-toggle="tooltip" data-placement="bottom" title="Nowy projekt" class="modernizator_field"><span class="glyphicon glyphicon-plus-sign"></span></div>
    </a>
</div>
{% endif%}
{% include 'AppHelperBundle:basic:flash.html.twig' %}
<div class="cloud">
    <div class="cloud_tt">
        <h3>Moje projekty</h3>
    </div>
    <div class="cloud_ct">
        <div class="cloud_elem_th">
            <div class="row well-sm">
                <div class="col-md-3">Nazwa projektu</div>
                <div class="col-md-2">Rola</div>
                <div class="col-md-3">Status projektu</div>
                <div class="col-md-2">Termin</div>
                <div class="col-md-2">Akcja</div>
            </div>
        </div>
        {% for project in myProjects %}
        <div class="cloud_elem">
            <div class="row well-sm">
                <div class="col-md-3">
                    <a href="{{ url('tasks', { projekt_nazwa: project.name }) }}">{{ project.label }}</a>
                </div>
                <div class="col-md-2">
                {{ UzytkownikProjekt.getRolaLabelByKey(project.rola_uzytkownika) }}
                </div>
                <div class="col-md-3">
                {{ Projekt.getStatusLabelByKey(project.status_projektu) }}
                </div>
                <div class="col-md-2">
                {{ project.termin|date('d-m-Y') }}
                </div>
                <div class="col-md-2">
                    {% if UzytkownikProjekt.getRolaLabelByKey(project.rola_uzytkownika) == 'Lider' %}
                        {{ 'Edycja ról' }}
                    {% endif %}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
<div class="cloud">
    <div class="cloud_tt">
        <h3>Pozostałe projekty</h3>
    </div>
</div>
{% endblock content %}